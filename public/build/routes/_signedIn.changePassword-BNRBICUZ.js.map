{
  "version": 3,
  "sources": ["../../../app/routes/_signedIn.changePassword.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/_signedIn.changePassword.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/_signedIn.changePassword.tsx\");\n  import.meta.hot.lastModified = \"1706454925361.0266\";\n}\n// REMIX HMR END\n\nimport { redirect } from '@remix-run/node';\nimport { Form, useActionData, useNavigate } from '@remix-run/react';\nimport { useState } from 'react';\nimport Button from '~/components/ui/Button';\nimport { Card } from '~/components/ui/Card';\nimport { TextInput } from '~/components/ui/TextInput';\nimport { getSession } from '~/cookies';\nimport { getUserId, updateUser } from '~/endpoints/user';\nimport { comparePasswords, generatePasswordHash } from '~/utils/passwordHashing.server';\nimport { passwordValid } from '~/utils/passwordValidator';\nexport async function action({\n  request\n}) {\n  const body = await request.formData();\n  const session = await getSession(request.headers.get('Cookie'));\n  const userId = session.get('userId');\n  const oldPassword = body.get('oldPassword');\n  const newPassword = body.get('newPassword');\n  const newPasswordRepeat = body.get('newPasswordRepeat');\n  let oldPasswordError = '';\n  let newPasswordError = '';\n  let newPasswordRepeatError = '';\n  const user = await getUserId(userId ?? -1);\n  if (oldPassword.length === 0) {\n    oldPasswordError = 'This field is required';\n  } else if (!comparePasswords(oldPassword, user?.passwordHash ?? '')) {\n    oldPasswordError = 'Current Password is incorrect';\n  }\n  if (newPassword.length === 0) {\n    newPasswordError = 'This field is required';\n  } else if (!passwordValid(newPassword)) {\n    newPasswordError = 'Passwords must contain at least 12 characters';\n  }\n  if (newPasswordRepeat.length === 0) {\n    newPasswordRepeatError = 'This field is required';\n  } else if (newPasswordRepeat !== newPassword) {\n    newPasswordRepeatError = 'New Passwords must match';\n  }\n  if (oldPasswordError || newPasswordError || newPasswordRepeatError) {\n    return {\n      oldPassword: oldPasswordError,\n      newPassword: newPasswordError,\n      newPasswordRepeat: newPasswordRepeatError\n    };\n  }\n  const newPasswordHash = await generatePasswordHash(newPassword);\n  await updateUser({\n    userId: userId ?? -1,\n    passwordHash: newPasswordHash\n  });\n  return redirect('/profile');\n}\nexport default function Profile() {\n  _s();\n  const navigation = useNavigate();\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [newPasswordRepeat, setNewPasswordRepeat] = useState('');\n  const actionData = useActionData();\n  return <Card>\n      <div className=\"flex w-96 flex-col p-4\">\n        <h1 className={' text-l text-brand_Teal p-1 text-center font-bold'}>\n          Change Password\n        </h1>\n        <Form method=\"post\">\n          <div className=\"p-1\">\n            <TextInput onChange={value => {\n            setOldPassword(value);\n          }} name={'oldPassword'} value={oldPassword} placeholder=\"Current Password\" label=\"Current Password\" helpText={actionData?.oldPassword ?? ''} error={!!actionData?.oldPassword} password />\n            <TextInput name={'newPassword'} onChange={value => {\n            setNewPassword(value);\n          }} value={newPassword} placeholder=\"New Password\" label=\"New Password\" helpText={actionData?.newPassword ?? ''} error={!!actionData?.newPassword} password />\n            <TextInput name={'newPasswordRepeat'} onChange={value => {\n            setNewPasswordRepeat(value);\n          }} value={newPasswordRepeat} placeholder=\"New Password Repeat\" label=\"New Password Repeat\" helpText={actionData?.newPasswordRepeat ?? ''} error={!!actionData?.newPasswordRepeat} password />\n          </div>\n          <div className=\"flex\">\n            <div className=\" flex w-1/2 justify-center self-center p-2\">\n              <Button variant=\"outline\" onClick={() => navigation('/logIn')}>\n                Cancel\n              </Button>\n            </div>\n            <div className=\" flex w-1/2 justify-center self-center p-2\">\n              <Button submit onClick={() => {}}>\n                Confirm\n              </Button>\n            </div>\n          </div>\n        </Form>\n      </div>\n    </Card>;\n}\n_s(Profile, \"ezRqP6+07E12IuR1H5zlIVVgI1k=\", false, function () {\n  return [useNavigate, useActionData];\n});\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,kBAAyB;AAEzB,IAAAA,gBAAyB;AAMzB,6BAAuD;AAqD/C;AAjFR,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,8CAAgD,EAAE;AAAA,EAC3F;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAyC;AACzC,cAAY,IAAI,eAAe;AACjC;AAuDe,SAAR,UAA2B;AAzElC,cAAAC;AA0EE,KAAG;AACH,QAAM,aAAa,YAAY;AAC/B,QAAM,CAAC,aAAa,cAAc,QAAI,wBAAS,EAAE;AACjD,QAAM,CAAC,aAAa,cAAc,QAAI,wBAAS,EAAE;AACjD,QAAM,CAAC,mBAAmB,oBAAoB,QAAI,wBAAS,EAAE;AAC7D,QAAM,aAAa,cAAc;AACjC,SAAO,mDAAC,QACJ,6DAAC,SAAI,WAAU,0BACb;AAAA,uDAAC,QAAG,WAAW,qDAAqD,+BAApE;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,IACA,mDAAC,QAAK,QAAO,QACX;AAAA,yDAAC,SAAI,WAAU,OACb;AAAA,2DAAC,aAAU,UAAU,WAAS;AAC9B,yBAAe,KAAK;AAAA,QACtB,GAAG,MAAM,eAAe,OAAO,aAAa,aAAY,oBAAmB,OAAM,oBAAmB,WAAU,8CAAY,gBAAZ,YAA2B,IAAI,OAAO,CAAC,EAAC,yCAAY,cAAa,UAAQ,QAFrL;AAAA;AAAA;AAAA;AAAA,eAEsL;AAAA,QACtL,mDAAC,aAAU,MAAM,eAAe,UAAU,WAAS;AACnD,yBAAe,KAAK;AAAA,QACtB,GAAG,OAAO,aAAa,aAAY,gBAAe,OAAM,gBAAe,WAAU,8CAAY,gBAAZ,YAA2B,IAAI,OAAO,CAAC,EAAC,yCAAY,cAAa,UAAQ,QAFxJ;AAAA;AAAA;AAAA;AAAA,eAEyJ;AAAA,QACzJ,mDAAC,aAAU,MAAM,qBAAqB,UAAU,WAAS;AACzD,+BAAqB,KAAK;AAAA,QAC5B,GAAG,OAAO,mBAAmB,aAAY,uBAAsB,OAAM,uBAAsB,WAAUA,MAAA,yCAAY,sBAAZ,OAAAA,MAAiC,IAAI,OAAO,CAAC,EAAC,yCAAY,oBAAmB,UAAQ,QAFxL;AAAA;AAAA;AAAA;AAAA,eAEyL;AAAA,WAT3L;AAAA;AAAA;AAAA;AAAA,aAUA;AAAA,MACA,mDAAC,SAAI,WAAU,QACb;AAAA,2DAAC,SAAI,WAAU,8CACb,6DAAC,kBAAO,SAAQ,WAAU,SAAS,MAAM,WAAW,QAAQ,GAAG,sBAA/D;AAAA;AAAA;AAAA;AAAA,eAEA,KAHF;AAAA;AAAA;AAAA;AAAA,eAIA;AAAA,QACA,mDAAC,SAAI,WAAU,8CACb,6DAAC,kBAAO,QAAM,MAAC,SAAS,MAAM;AAAA,QAAC,GAAG,uBAAlC;AAAA;AAAA;AAAA;AAAA,eAEA,KAHF;AAAA;AAAA;AAAA;AAAA,eAIA;AAAA,WAVF;AAAA;AAAA;AAAA;AAAA,aAWA;AAAA,SAvBF;AAAA;AAAA;AAAA;AAAA,WAwBA;AAAA,OA5BF;AAAA;AAAA;AAAA;AAAA,SA6BA,KA9BG;AAAA;AAAA;AAAA;AAAA,SA+BL;AACJ;AACA,GAAG,SAAS,gCAAgC,OAAO,WAAY;AAC7D,SAAO,CAAC,aAAa,aAAa;AACpC,CAAC;AACD,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,SAAS;AAE1B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": ["import_react", "_c"]
}
